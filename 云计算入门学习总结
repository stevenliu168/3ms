http://3ms.huawei.com/km/blogs/details/2519745

1      云计算的基本概念
云计算是一种通过网络以服务的方式提供动态可伸缩的虚拟化资源的计算模式，可以随时随地、便捷地随需应变地从可配置计算资源共享池中获取所需要的资源，而且资源可以快速获取和释放，使管理资源的工作和与服务提供商的交互减小到最低限度。云计算的八大特点：大规模、同质化、虚拟化（资源复用、软硬件解耦）、弹性计算、低成本软件、地理分布、服务定位、先进的安全技术。云计算的五大基本特征：按需的自助服务、广泛的网络访问、资源池、快速的弹性、可度量的服务。

1.1      相关概念
云管理是指以云计算技术为依托，以实现经营管理优化为目的，系列软硬件应用方案的综合。云管理平台包含虚拟化平台以及相关硬件。

云计算的三种服务模式分为基础设施（Infrastructure，存储、网络、服务器、虚拟化）>平台（Platform，操作系统、中间件、运行环境）>应用（Software，数据、应用程序）三层，也就是对应着我们常听到的IaaS（出租基础IT资源，例如向客户提供计算、存储、网络等资源服务）、PaaS（应用运行和开发环境，例如向客户提供一个云化的数据库服务）和SaaS（互联网和企业应用，例如向客户提供在线office）。

云部署模式（实施模型）分为私有云（搭建在企业内部，最安全，目前华为基于OpenStack解决方案主打）、公有云（在公网上，最便宜方便）、社区云（分行业或社区，由众多要求相仿的客户共享使用）和混合云（由两个或多个独立的云类型组成，例如私有云+公有云，既保证安全又将不重要的放到便宜的公有云中）。

1.2      云计算数据中心
ICT网络正在从核心网为中心变成以云数据中心为中心。云计算数据中心简称云数据中心，是运用云计算技术，具备资源池化、自动化管理、服务化的特征，以IaaS（Infrastructure的云服务化，出租基础设施存储空间等，由买变成租）、PaaS（Platform的云服务化，用来开发业务应用）、SaaS（Application的云服务化，使用在线化的应用）的形式对内对外提供服务的的数据中心，云操作系统（Cloud OS）是云数据中心的核心部件。主要特点是：物理分散、逻辑集中、异构共存、资源共享和按需服务。

云数据中心是数据中心发展的必然趋势。基于技术平滑扩展实现企业级的资源共享，主要采取分布式架构。分为机房配套层（UPS、制冷等机房设备，有Uptime标准和PUE节能等要求，一般达到3级+）、基础设施层（OS、服务器、网络等ICT设备，SHARE78容灾标准及AWS EC2、Openstack社区标准等云计算事实标准，一般容灾达到4-5级）、平台软件（DBMS、EBS）和应用软件（CRM、ERP）。

一般新企业为了保护投资一般购买公有云服务，大型企业和运营商会直接整合自己的资源构建完整的云数据中心，大中企业一般会逐步进行云数据中心的转换。

云数据中心需主动运维、全球资源可视化、流程管控、资源弹性调度能力。

1.3      云计算的好处
当前云计算火热，那云计算到底有什么好处呢？

先想一下当前不应用云计算的情况是什么样的：各企业如果需要满足各企业的业务发展，需要购买大量的网络设备（交换机、路由器、防火墙等）、IT设备（服务器、存储等）用于企业办公和应用服务器等的承载，需要经过大量投资和漫长的环境规划和搭建才能开始办公使用。同时为了确保日常运行，需有专门的运维团队进行这些设备的维护。当出现问题时运维团队如果无法解决时需求助多方的厂商，各厂商对于各企业定制化的使用可能问题解决较慢，严重的情况将导致企业业务中断。

云计算要达到的目的就是用户只需接入网络就能随时随地使用不同的设备，安全访问不同的企业应用。当前对于最终用户来说不使用云也同样可以这样，但是企业需要有大量的设备和运维人员才能实现成这样。但在云计算下企业作为最终使用方也可以只需要接入网络即可，而不用管背后是怎样实现的，就像用水、用电一样只需要使用，而不需要管水电是怎么得来的，更不用去建自来水设备或发电站。也就是将自建变成租用，将原先烟囱式的建设模式变成水平式建设模式，形成资源池打通共享。

显而易见，云计算带来的好处是巨大的。

对于各企业（使用者）来说是按需自助服务、广泛网络接入（随时随地）、资源池化、资源弹性伸缩、可量化的服务：

Ø  按需使用，只需支付使用的资源，避免了各企业重复投资的成本；

Ø  快速获取服务，无需长时间等待，快速根据业务发展随需扩张；

Ø  无需购买专门的机房和昂贵的设备，也就无需专业的维护团队；

Ø  无需不断投资对设备进行升级和机房重建，业务更改时也无需调整网络；

Ø  云计算由专业人士提供更安全、可靠、更便宜，只需按服务付费就能得到ICT资源，包括技术支持、专业技能等；

Ø  中小型企业成为“轻公司”，聚焦核心业务的发展，加快创新速度。

对于云计算厂商（提供方）来说则是从提供设备转换为提供服务提升运营效率：

Ø  设备统一维护，提供标准化的服务，易于维护；

Ø  对于老旧的设备可以直接进行升级和更换，而不需要继续投入维护；

Ø  构建资源池，各企业对于资源按需使用，避免资源浪费，整体上更加节能；

Ø  服务实例自动发放，只负责资源池的管理，无需对服务实例进行管理。

从整体上看，不管对于哪方来说成本都是降低的。单单从IaaS来看就已经好处多多了，更别说PaaS和SaaS了。当然从云计算孵化出的大数据、虚拟化等技术不仅是解决当前云计算的难题，也让未来更好的服务提供了很好的技术基础。另外云计算与物联网、机器学习等结合能够让未来社会变得更加便捷智能。

1.4      架构与技术
云计算的架构与传统架构不同在于：可靠性（对于硬件的可靠性不高，通过应用层提高可靠性）、计算（分布式）、网络（软件定义的网络技术，利用软件实现自动化的配置和管理）、存储及文件系统（分布式Scale-out弹性横向扩充节点）、扩展模式（水平扩展）、监控（自研的监控系统）、备份容灾（同城容灾、异地容灾）、数据库（分布式）、大数据服务（Hadoop服务器集群）。

云计算技术包含虚拟化、大规模数据管理技术、编程模型、分布式的资源管理、分布式存储、信息安全、网格计算、效用计算、面向服务等技术。



2      虚拟化
很多人会把云计算当成虚拟化，或者把虚拟化当成云计算，其实可以将云计算看成是一种解决方案，虚拟化是实现这个解决方案的其中一个最重要的核心技术。云计算的技术演进是虚拟化（Xen、vmware等）>以资源为核心（openstack等）>以应用为核心（应用的生命周期），从资源云化逐步向应用云化发展。

所谓虚拟化就是资源的逻辑表示，不受物理限制的约束。虚拟化分为分区计算（一个物理服务器划分为多个虚拟机，常用方向）和网格计算（多个物理服务器组合成一个虚拟机，几乎无应用）两个方向。虚拟机的四大特点：分区（单个物理服务器多个虚拟机）、隔离（虚拟机之间相互隔离）、封装（整个虚拟机在独立文件中）、独立（虚拟机可以运行在任何物理服务器上）。

2.1      计算虚拟化
计算虚拟化的几个关键概念：

l  Hypervisor：虚拟化操作系统，负责管理和分配物理资源，也叫VMM（虚拟机监视器）。

从架构上分为：寄居虚拟化架构（在Windows/Linux等操作系统上虚拟化另一个Windows或Linux操作系统，例如Redhad KVM、Vmware workstation）、裸金属虚拟化架构（不依赖操作系统直接在裸机上虚拟化，例如Citrix Xen、Vmware ESX、微软Hyper-V）和操作系统虚拟化架构（共享一个系统内核，Windows上只能虚拟化Windows，很少用）。华为主要基于KVM（Linux内核中，社区更活跃，性能更好，更轻量化减轻管理负担）和Xen（诞生更早，功能更多，隔离性和安全性更好）。

从技术上分为：全虚拟化（所有虚拟机的指令都是由Hypervisor翻译和传达，例如ESX、KVM）、半虚拟化（由Hypervisor翻译一部分，例如Xen、Hyper-V）和硬件辅助虚拟化（由硬件实现，性能最好是未来的趋势）。

l  虚拟机：通过软件模拟的逻辑计算机系统。

l  镜像：虚拟机文件的一个镜像，可用于创建新的虚拟机。

l  集群：一组资源共享的主机。

计算虚拟化的实现包含三个技术，都是通过Hypervisor来统一调度管理：

l  CPU虚拟化：1个vCPU可能对应1到多个物理CPU。vCPU总数=CPU数*Core数*超线程（2）。

l  内存虚拟化

l  IO虚拟化

计算虚拟化的高级特性：

l  CPU QoS：限制虚拟机获得的最大计算能力，预留最低计算能力，划分获得资源的竞争权重。

l  内存复用：虚拟机内存规格总和可以大于物理内存。

l  虚拟机热迁移：系统持续运行业务不中断的情况下迁移。

l  HA：被动触发，故障后自动迁移。

l  DRS：分布式资源调度，负载均衡、高级调度（虚拟机互斥、限制所在主机组）。

2.2      网络虚拟化
网络虚拟化是指物理服务器内部构造虚拟的网络环境为虚拟机提供网络功能。

l  虚拟网卡：用软件模拟网络环境，提供真实网卡的功能，无需连接。

当前实现虚拟网卡主要有这三类：普通网卡（由Domain0中转数据拷贝，消耗主机资源，最常用）、VMDq智能网卡（华为自研，不需Domain0中转由Hypervisor完成地址转换，开销最小，应用最少）和SR-IOV直通（芯片硬件完成地址转换，性能最好，但不支持热迁移等高级特性）。

l  虚拟交换机：在物理服务器内部虚拟出来的用于虚拟机之间通信，一般采取分布式交换机DVS。包含的特性：物理网卡绑定（主备、负荷分担）、虚拟网络QoS。

虚拟网络设备包括：虚拟路由器、虚拟防火墙、虚拟负载均衡。虚拟网络设备结合虚拟网卡构成了vPC（virtual Private Cloud，基于虚拟防火墙的独立网络），每个vPC有防火墙用于vPC的内外部的安全访问控制，同一vPC内部可以创建多个子网。

vDC（虚拟数据中心），包括虚拟网络、计算、存储等。

2.3      存储虚拟化
存储类型：虚拟化和非虚拟化（本地存储、FC存储、ISCSI存储支持虚拟化和非虚拟化两种使用方式）、分布式存储（Fusion Storage，或叫Server SAN）和NFS（NAS，应用少）。

只有虚拟化和分布式存储支持存储虚拟化的高级特性：

l  精简配置：只会占用客户使用的实际空间，不占预留的存储空间，但只要使用后的空间不会随着数据删除而自动释放，需要使用空间回收进行释放。

l  快照：只针对增量数据进行备份。

l  热迁移

l  磁盘扩容

l  磁盘IO上限设置：设置硬盘读写速度。

3      华为云计算相关产品及解决方案
企业实现云计算转型包括四大解决方案：虚拟化整合（物理资源虚拟化、资源整合、按需使用）、融合资源池（重点在管理，自动化管理、资源弹性调度和动态资源共享，IaaS）、云数据中心（关注于服务，多数据中心统一管理和运维）和关键业务云化（业务创新，业务的统一管理、动态迁移，PaaS、SaaS）。

3.1      FusionCloud系列产品
华为的云计算方案主要是FusionCloud系列产品，包含FusionAccess桌面云（支持TC、PC、移动终端接入）、FusionInsight大数据（未来会和FusionSphere云平台合并）和FusionSphere云平台。

FusionSphere包含FusionSphere OpenStack（基于KVM性能更强，用于NFV电信云化，服务于全球运营商）和FusionComputer（基于Xen能提供更多的高级特性，用于服务器虚拟化，服务于各企业），两者结合用于云数据中心，服务于全球运营商及大型企业。

OpenStack是一个云操作系统，是一个开源项目组合。不提供虚拟化的能力，管理虚拟化软件和硬件服务器。OpenStack的几个服务：Nova（计算服务，负责计算实例生命周期管理，例如创建/迁移虚拟机、CPU内存规格的调整等）、Neutron（网络服务，为计算实例提供虚拟网络，为OpenStack其他服务提供网络连接）、Cinder（块存储服务，为计算实例提供块存储，例如创建/删除卷等）、Swift（对象存储服务，分布式的对象存储，可以存放虚拟机镜像、备份日志文件等）、Heat（部署编排服务，基于模板的自动化部署快速批量下发配置）、Keystone（鉴权服务，为nova等服务提供认证）、Glance（镜像服务，上传、管理和获取镜像）、ceilometer（测量服务，记录所有事件，为计费和监控提供数据）、Horizon（图形化统一管理界面），每个服务都包括一些组件。

各产品的其他详细介绍可见：华为的虚拟资源。

3.2      NFVI解决方案
NFV（网络功能虚拟化），运用IT的虚拟化技术采用标准的硬件部署软件实现网络功能，对外体现的功能同传统设备差别不大。

NFV从横向架构分为三层：基础设施层（NFVI，通过OpenStack进行网络、计算等资源池的管理和调度）、虚拟网络层（网络功能的软件实现，物理网络向虚拟网络的映射）和运营支撑层（OSS/BSS）。每一层都有对应的类似OpenStack的管理编排软件。故从纵向架构分为两层：业务网络域和管理编排域。

为客户带来的变化：多种专用硬件的设备形态变成统一的标准化硬件平台；组网根据行政地域划分组网变成围绕核心DC和边缘DC组网；专业纵向独立维护的运维机制（维护硬件设备）变为横纵向运维（横向纵向各层的维护）。

友商基本都是采取OpenStack+KVM（开源的，在Linux操作系统内核能虚拟化多个操作系统）的方案。华为的NFVI解决方案也是基于OpenStack增强（FusionSphere Openstack，在可靠性、性能和易用性等方面均有增强）的开放云服务与云管理FusionSphere云平台。

NFVI场景中存在如下几个概念：Region（区域，按照地理位置划分，资源独立）、AZ（Availability Zone可用分区，一个区域可以划分多个AZ，一组节点的集合形成AZ，AZ相互独立，一个AZ的故障不影响其他AZ）、Host Aggregate（根据硬件资源的某一属性来进行划分的集合，例如固态硬盘的机器可以划分为一个集合）、角色（打包不同的组件实现某一个功能）、正向代理（FusionSphere系统内部访问外部）、反向代理（系统外部访问内部）、Physnet（通过物理网络实现虚拟网络的功能）、GE/10GE网络平面（管理平面、网络/FC存储平面）。

NFVI配置步骤：包括OpenStack和OM两个部件，先安装KVM系统，其他KVM中从首KVM通过交换机自动安装，然后部署OpenStack，之后创建两台虚拟机安装主备FusionSphere OM。

其他详细内容请见：NFVI基本概念。开局规划配置可见：NFVI规划设计专题。

3.3      SDN
SDN是网络架构的变革。SDN主要解决如下IP面临的问题：IP网络唯一路径利用率低、协议复杂、缺少全局视图，SDN给网络构建一个大脑，通过全局视图和集中控制实现网络自动优化与网络能力开放。SDN的价值：1、实现跨厂商端到端业务自动发放；2、简化运维，加快业务创新和上市；3、网络能力开放，实现网络资源货币化。华为主要使用Controller端到端配置业务路径。

业界各厂商提出的理念：分层开放的架构，定义了OpenFlow的标准协议（南向控制协议之一），现有设备向SDN演进I2RS（Interface to Routing System，基于传统设备开放接口）、PCE等协议，网络功能虚拟化（NFV，重构网络设备形态），网络协同层（在传统设备退网后，通过协同层可以实现网络可编程，加速创新与使能）LSO（Lifecycle Service Orchestration，跨越物理和虚拟两网支持真正端到端的业务管理）和网络即服务的理念。运营商和设备商为了现有设备能够继承，提出了另一个方案：Overlay（基于VxLAN等技术实现大二层的业务逻辑网络）搭建在Underlay（原有的承载网络）上，使得现有的物理网络可继承的同时逻辑网络不依赖物理网络可以灵活控制和调整。

SDN与NFV的区别在于：SDN是通过转发和控制分离面向网络架构创新（方便管理），NFV是软件和硬件解耦面向设备形态的创新（降低成本）。SDN关键特征：集中控制、优化全局效率；开放接口、加快业务上线；网络抽象、屏蔽底层差异。NFV关键特征：上层业务云化，底层硬件标准化；分层运营，加快业务上线与创新。SDN实现网络的端到端管控，包括物理网元和虚拟网元。两个方向都在发展并可以互补。

华为主要参与ONOS（控制器）、OPENFV（NFV）开源项目。SDN/NFV演进的三大场景：1、网元虚拟化软硬件分离（Silo模式）；2、云化I层协同；3、基于云化使能各层进行业务商业创新。

4      参考资料
本文主要根据如下学习材料并综合个人的理解进行总结：

1)        iLearning的MOOC课程：《云计算公共基础课程》

2)        《中国云计算应用现状白皮书》

3)        iLearning的MOOC课程：《人人懂IT》

4)        iLearning的MOOC课程：《FusionSphere NFVI场景赋能培训》

5)        iLearning的MOOC课程：《NFVI基础知识》

6)        iLearning的MOOC课程：《SDN基础知识》

后续将根据深入学习再不断细化和补充。

如有不当之处请及时指出，谢谢！
